<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>키오스크 콘솔 프로그램</title>
  </head>
  <body>
    <script>
      //   let products = [
      //     { name: "베이컨버거", price: 10000, image: "burger1.png" },
      //   ];
      let products1 = []; 

      console.log("-----------키오스크 콘솔 프로그램입니다. -------------");

      while (true) {
        const inputNum = prompt(
          "1.상품입력 2.전체출력 3.검색 4.수정 5.삭제 6.종료"
        );
        console.log("1.상품입력 2.전체출력 3.검색 4.수정 5.삭제 6.종료");
        console.log("입력하세요:" + inputNum);

        if (6 == Number(inputNum)) {
          //무한루프 종료
          console.log("키오스크 머신이 종료되었습니다.");

          break;
        }

        if (1 == Number(inputNum)) {
          // 상품 입력
          const name = prompt("상품 이름 :");
          console.log("상품 이름 : " + name);
          const price = prompt("상품 가격 :");
          console.log("상품 가격 : " + price);
          const image = prompt("이미지 이름 :");
          console.log("이미지 이름 : " + image);
          console.log("상품 입력이 완료되었습니다.");
          // 객체 생성
          const product = { name: name, price: Number(price), image: image };
          // 사용자가 입력한 상품을 배열에 추가
          products1.push(product);
        } else if (2 == Number(inputNum)) {
          // 사용자 입력 상품 출력
          if (products1.length == 0) {
            console.log("상품 목록이 없습니다!");
          } else {
            for (let i = 0; i < products1.length; i++) {
              console.log("상품 이름: " + products1[i]["name"]);
              console.log("상품 가격: " + products1[i]["price"]);
              console.log("상품 이미지: " + products1[i]["image"]);
              console.log("전체 상품출력이 완료되었습니다.");
            }
          }
        } else if (3 == Number(inputNum)) {
          // 검색 기능
          const searchTerm = prompt(
            "검색할 상품 이름을 입력하세요(부분 문자만 입력해도 됩니다.)"
          );

          // 부분 검색 기능 (products1 배열에서 검색)
          const results = products1.filter((product) =>
            product.name.includes(searchTerm)
          );

          if (results.length > 0) {
            for (const product of results) {
              console.log(`검색된 상품 이름 : ${product.name}`);
              console.log(`검색된 상품 목록`);
              console.log(`상품 이름: ${product.name}`);
              console.log(`상품 가격: ${product.price}`);
              console.log(`이미지 이름: ${product.image}`);
            }
            console.log(`검색된 상품이 출력되었습니다.`);
          } else {
            console.log("검색된 상품이 없습니다.");
          }
        } else if (4 == Number(inputNum)) {
          const searchTerm = prompt("수정할 상품 이름을 입력해주세요.");
          const productToEdit = products1.find(
            (product) => product.name === searchTerm
          );

          if (productToEdit) {
            const newPrice = prompt("수정할 상품 가격을 입력하세요");
            productToEdit.price = Number(newPrice);
            console.log(`수정할 상품 이름 : ${productToEdit.name}`);
            console.log(`상품 가격 : ${productToEdit.price}`);
            console.log(`이미지 이름: ${productToEdit.image}`);
            console.log("상품 정보가 수정되었습니다.");
          }
        } else if (5 == Number(inputNum)) {
          const searchTerm = prompt("삭제할 상품 이름 입력하세요");
          const productDeleteIndex = products1.findIndex(
            (product) => product.name === searchTerm
          );
          if (productDeleteIndex !== -1) {
            const deletedProduct = products1[productDeleteIndex]; 
            products1.splice(productDeleteIndex, 1); // 상품 삭제
            console.log(`삭제할 상품 이름: ${deletedProduct.name}`);
            console.log(`${deletedProduct.name} 상품이 삭제 되었습니다.`);
          } else {
            console.log("삭제할 상품을 찾을 수 없습니다.");
          }
        }
      }
    </script>
  </body>
</html>
